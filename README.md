# chat-service
동일한 채팅 서비스를 Spring MVC와 WebFlux로 각각 구현하여 성능을 비교하기  


<pre><code>```
[chat-react]
    └── 간단한 채팅 기반 애플리케이션을 구현했으며, 시각화 클라이언트

[chat-bot]
    └── 각 웹 서버에 부하를 발생시켜 성능을 측정하고자 채팅 생성기를 제작

[chat-mvc]
    └── Spring Boot MVC + Tomcat 기반으로 채팅 웹 서버를 제작

[chat-webflux]
    └── Spring Boot WebFlux + Netty 기반으로 채팅 웹 서버를 제작

[monitoring]
    └── Prometheus, Grafana 등 모니터링 관련 설정 저장
``` </code></pre>


# 프로젝트 개요
WebSocket 기반의 간단한 채팅 기능을 두 가지 방식(MVC와 WebFlux)으로 구현하였다. 이후 가상의 클라이언트인  
chat-bot을 개발해 실행하고, 시뮬레이션 상황을 통해 대규모 실시간 메시지 처리 성능과 안정성을 모니터링 도구를  
활용해 측정할 예정이다.  

모니터링 하고자 하는 지표는 아래와 같다.  

| 항목           | 설명                                      |
|----------------|-------------------------------------------|
| 메시지 처리량   | 초당 처리 가능한 메시지 수 (TPS)          |
| 응답 속도       | 평균 / 최대 지연 시간                    |
| 리소스 사용량   | CPU, 메모리, GC 타임                     |
| 메시지 유실률   | 전송 대비 수신 누락 비율                  |
| 최대 접속자 수  | 서버가 안정적으로 처리 가능한 동시 접속 수 |


### 채팅 어플리케이션 기능
* 아이디만 입력하여 채팅 서버로 입장
    * 사용자 입장은 REST API (단발성 요청)
* 채팅방을 생성하거나 채팅방을 조회하고 입장, 퇴장
    * 채팅방 생성은 REST API, 채팅방 생성 알림은 WebSocket
    * 첫 채팅방 목록 조회는 REST API, 실시간 채팅방 정보는 WebSocket
    * 채팅방 입장은 REST API, 채팅방 입장 알림은 WebSocket
    * 채팅방 퇴장은 REST API, 채팅방 퇴장 알림은 WebSocket
* 1:1 또는 그룹 채팅 기능
    * 채팅방 내 모든 실시간 활동(메시지, 입장/퇴장 알림 등)은 WebSocket


### 클라이언트를 통한 기능 시연영상



### 성능테스트 결과
MVC와 WebFlux 웹 서버는 정확한 성능측정을 위해 리소스 사용이 제한된 docker 컨테이너에서 구동시켰다.
CPU는 1024, 메모리 2G, 디스크 용량 20G로 제한 설정을 하였다.
